!function(global){"use strict";function sendRequest(method,url,data,success_cb,error_cb){var req=new XMLHttpRequest;req.open(method,url,!0),req.setRequestHeader("Client-SDK","js4.1.0"),req.onreadystatechange=function(){4===req.readyState&&(200<=req.status&&req.status<400?success_cb&&success_cb(req):error_cb&&error_cb&&error_cb(new Error("Server responded with HTTP "+req.status),req))},error_cb&&(req.onerror=error_cb),req.send(data)}function encodeQueryString(params){var pairs=[];for(var k in params)params.hasOwnProperty(k)&&pairs.push(encodeURIComponent(k)+"="+encodeURIComponent(params[k]));return pairs.join("&")}function cloneObj(obj){var copy={};if("object"!=typeof obj||!obj)return copy;for(var k in obj)obj.hasOwnProperty(k)&&(copy[k]=obj[k]);return copy}function Adjust(options){var _baseParams=cloneObj((options=options||{}).device_ids);return _baseParams.app_token=options.app_token,_baseParams.environment=options.environment,_baseParams.os_name=options.os_name||"android",{trackSession:function(onSuccess,onError){sendRequest("GET","https://app.adjust.com/session?"+encodeQueryString(cloneObj(_baseParams)),null,onSuccess,onError)},trackEvent:function(options,onSuccess,onError){options=options||{};var params=cloneObj(_baseParams),revenue=function(options){var revenue=parseFloat(options.revenue);if(revenue<0||!options.currency)return null;return{revenue:revenue.toFixed(5),currency:options.currency}}(options),callbackParams=_getMap(options.callback_params),partnerParams=_getMap(options.partner_params);params.event_token=options.event_token,revenue&&(params.revenue=revenue.revenue,params.currency=revenue.currency);callbackParams&&(params.callback_params=JSON.stringify(callbackParams));partnerParams&&(params.partner_params=JSON.stringify(partnerParams));sendRequest("GET","https://app.adjust.com/event?"+encodeQueryString(params),null,onSuccess,onError)}};function _getMap(params){if(!(params=params||[]).length)return null;for(var map={},i=0;i<params.length;i++)map[params[i].key]=params[i].value;return cloneObj(map)}}!1 in new XMLHttpRequest&&(sendRequest=function(){}),"object"==typeof module&&"object"==typeof module.exports?module.exports=Adjust:global.Adjust=Adjust}(this);